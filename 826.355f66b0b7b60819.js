"use strict";(self.webpackChunkalojamiento_frontend=self.webpackChunkalojamiento_frontend||[]).push([[826],{826:(Z,u,a)=>{a.r(u),a.d(u,{ProductSalesModule:()=>I});var f=a(6895),m=a(6646),p=a(4385),g=a(1135),c=a(2722),r=a(168),S=a(8268);const b={id:{title:"ID",sort:!1,width:"10%"},ventas:{title:"Fecha de Reservaci\xf3n",sort:!1,valuePrepareFunction:e=>e?.fecha,filter:{type:"custom",component:a(9267).j}},productos:{title:"Productos",sort:!1,valuePrepareFunction:e=>`${e?.nombre} - ${e?.precio}`,filterFunction:(e,l)=>"string"!=typeof l||e.nombre?.toUpperCase()>=l.toUpperCase()||""===l},precioUni:{title:"Precio Uni.",sort:!1},cantidad:{title:"Cantidad",sort:!1},precioTotal:{title:"Total",sort:!1}};var C=a(3947),t=a(1571),h=a(388),P=a(2317),A=a(9219),T=a(2243),y=a(4554);const L=[{path:"",component:(()=>{class e extends S.nh{constructor(s,o){super(),this.modalService=s,this.productSalesService=o,this.data=new p.nC,this.params=new g.X(new r.NV),this.data1=[],this.columnFilters=[],this.totalItems=0,this.settings={...this.settings,hideSubHeader:!1,actions:{columnTitle:"Acciones",edit:!0,delete:!0,add:!1,position:"right"},columns:{...b}}}ngOnInit(){this.data.onChanged().pipe((0,c.R)(this.$unSubscribe)).subscribe(s=>{"filter"===s.action&&(s.filter.filters.map(i=>{let n="",d=r.ay.ILIKE;switch(n=`filter.${i.field}`,i.field){case"id":d=r.ay.EQ;break;case"fecha":i.search=this.returnParseDate(i.search),d=r.ay.EQ;break;case"alojamientos":d=r.ay.ILIKE,n=`filter.${i.field}.nombre`;break;default:d=r.ay.ILIKE}""!==i.search?this.columnFilters[n]=`${d}:${i.search}`:delete this.columnFilters[n]}),this.params=this.pageFilter(this.params),this.getAllProductSales())}),this.params.pipe((0,c.R)(this.$unSubscribe)).subscribe(()=>this.getAllProductSales())}getAllProductSales(){this.loading=!0;let s={...this.params.getValue(),...this.columnFilters};this.productSalesService.getAll(s).subscribe({next:o=>{console.log(o),this.data.load(o.data),this.data.refresh(),this.totalItems=o.count,this.loading=!1},error:o=>{this.loading=!1,this.data.load([])}})}edit(s){this.openModal(s)}openModal(s){this.modalService.show(C.W,{initialState:{shopping:s,callback:i=>{i&&this.getAllProductSales()}},class:"modal-lg modal-dialog-centered",ignoreBackdropClick:!0})}showDeleteAlert(s){this.alertQuestion("warning","Eliminar","\xbfDesea eliminar este registro?").then(o=>{o.isConfirmed&&this.delete(s.id)})}delete(s){this.productSalesService.remove(s).subscribe({next:()=>{this.alert("success","Compras","Borrado Correctamente"),this.params.pipe((0,c.R)(this.$unSubscribe)).subscribe(()=>this.getAllProductSales())},error:o=>{this.alert("error","No se logro Eliminar","Existe una relacion")}})}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(h.tT),t.Y36(P.U))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-productSales-list"]],features:[t.qOj],decls:19,vars:9,consts:[[3,"header"],["header","",1,"ch-content"],[1,"title"],["body",""],[1,"row"],[1,"col-md-8","mb-3"],[1,"col-md-4","text-end","d-flex","flex-row-reverse","mb-3"],[1,"mr-3"],["type","button","tooltip","Nuevo","containerclass","tooltip-style",1,"btn","btn-info","btn-sm","active","d-flex","justify-content-center","align-items-center","ml-3",3,"click"],[1,"bx","bx-plus","bx-sm","ml-2"],[3,"settings","leftList","settingsChange"],[1,"col-md-12"],[1,"table-responsive"],[3,"settings","source","edit","delete"],[3,"params","totalItems"]],template:function(s,o){1&s&&(t.TgZ(0,"app-card",0)(1,"div",1)(2,"h5",2),t._uU(3,"VENTA DE PRODUCTOS"),t.qZA()(),t.TgZ(4,"div",3)(5,"div",4),t._UZ(6,"div",5),t.TgZ(7,"div",6)(8,"div",7)(9,"button",8),t.NdJ("click",function(){return o.openModal()}),t._uU(10," Nuevo "),t._UZ(11,"i",9),t.qZA()(),t.TgZ(12,"app-columns-select",10),t.NdJ("settingsChange",function(n){return o.settings=n}),t.qZA()()(),t.TgZ(13,"div",4)(14,"div",11)(15,"div")(16,"div",12)(17,"ng2-smart-table",13),t.NdJ("edit",function(n){return o.edit(n.data)})("delete",function(n){return o.showDeleteAlert(n.data)}),t.qZA()(),t._UZ(18,"app-pagination",14),t.qZA()()()()()),2&s&&(t.Q6J("header",!0),t.xp6(12),t.Q6J("settings",o.settings)("leftList",!0),t.xp6(3),t.Tol(o.loading?"table-loading":""),t.xp6(2),t.Q6J("settings",o.settings)("source",o.data),t.xp6(1),t.Q6J("params",o.params)("totalItems",o.totalItems))},dependencies:[A.A,T.L,p.T5,y.Q]}),e})()}];let U=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.Bz.forChild(L),m.Bz]}),e})();var F=a(8909);let I=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[f.ez,U,F.m8,h.zk.forChild()]}),e})()}}]);