"use strict";(self.webpackChunkalojamiento_frontend=self.webpackChunkalojamiento_frontend||[]).push([[592],{6043:(O,v,t)=>{t.d(v,{c:()=>m});var c=t(5551),r=t(8463),u=t(1571),g=t(4833);let m=(()=>{class o extends r.O{constructor(l){super(),this.bedroomsRepo=l,this.router=c.J.Habitaciones}getAll(l){return this.bedroomsRepo.getAll(this.router,l)}getById(l){return this.bedroomsRepo.getById(this.router,l)}getAllHabUserById(l,f){return this.bedroomsRepo.getById02(`${this.router}/getAllHabUser`,l,f)}create(l){return this.bedroomsRepo.create(this.router,l)}update(l,f){return this.bedroomsRepo.updateTypeServices(this.router,l,f)}remove(l){return this.bedroomsRepo.remove(this.router,l)}}return o.\u0275fac=function(l){return new(l||o)(u.LFG(g._))},o.\u0275prov=u.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},5358:(O,v,t)=>{t.d(v,{H:()=>m});var c=t(5551),r=t(8463),u=t(1571),g=t(4833);let m=(()=>{class o extends r.O{constructor(l){super(),this.inventoriesRepo=l,this.router=c.J.Inventarios}getAll(l){return this.inventoriesRepo.getAll(this.router,l)}getById(l){return this.inventoriesRepo.getById(this.router,l)}create(l){return this.inventoriesRepo.create(this.router,l)}update(l,f){return this.inventoriesRepo.updateTypeServices(this.router,l,f)}remove(l){return this.inventoriesRepo.remove(this.router,l)}}return o.\u0275fac=function(l){return new(l||o)(u.LFG(g._))},o.\u0275prov=u.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},8218:(O,v,t)=>{t.d(v,{q:()=>M});var c=t(4006),r=t(168),u=t(8268),g=t(999),m=t(4553),o=t(1571),e=t(388),l=t(6913),f=t(6043),I=t(8796),D=t(312),A=t(4576),b=t(7597),C=t(7209);let M=(()=>{class E extends u.nh{constructor(_,n,s,i){super(),this.modalRef=_,this.fb=n,this.accomodationService=s,this.bedroomService=i,this.form=new c.cw({}),this.title="HABITACI\xd3N",this.status="Nuevo",this.edit=!1,this.idAccom=0,this.accomodations=new m.b}ngOnInit(){this.prepareForm()}prepareForm(){this.form=this.fb.group({noHabitacion:[null,[c.kI.required,c.kI.pattern(g.bu),c.kI.maxLength(10)]],preferencias:["SIMPLE",[c.kI.required]],estado:["LIBRE",[c.kI.required]],alojamientoId:[this.idAccom,[c.kI.required]]}),this.form.controls.alojamientoId.disable(),null!=this.bedroom&&(this.edit=!0,console.log(this.bedroom),this.form.patchValue(this.bedroom)),setTimeout(()=>{this.getAccomodation(new r.NV)},100),console.log(this.idAccom)}confirm(){this.edit?this.update():this.create()}create(){this.loading=!0,console.log(this.idAccom);let _={noHabitacion:Number(this.form.controls.noHabitacion.getRawValue()),preferencias:this.form.controls.preferencias.getRawValue(),estado:this.form.controls.estado.getRawValue(),alojamientoId:Number(this.form.controls.alojamientoId.getRawValue())};this.bedroomService.create(_).subscribe({next:n=>{this.handleSuccess(),this.loading=!1},error:n=>{this.loading=!1}})}handleSuccess(){this.alert("success",this.title,(this.edit?"Actualizada":"Guardada")+" Correctamente"),this.loading=!1,this.modalRef.content.callback(!0),this.modalRef.hide()}update(){if(this.bedroom){this.loading=!0;let _={noHabitacion:Number(this.form.controls.noHabitacion.getRawValue()),preferencias:this.form.controls.preferencias.getRawValue(),estado:this.form.controls.estado.getRawValue(),alojamientoId:Number(this.form.controls.alojamientoId.getRawValue())};this.bedroomService.update(this.bedroom.id,_).subscribe({next:n=>{this.loading=!1,this.handleSuccess()},error:n=>{this.loading=!1}})}}getAccomodation(_){_["filter.id"]=`$eq:${this.idAccom}`,this.accomodationService.getAll(_).subscribe({next:n=>{this.accomodations=new m.b(n.data,n.count)},error:n=>{this.accomodations=new m.b,this.loading=!1}})}onChangeAccomodation(_){console.log(_)}close(){this.modalRef.hide()}}return E.\u0275fac=function(_){return new(_||E)(o.Y36(e.UZ),o.Y36(c.qu),o.Y36(l.A),o.Y36(f.c))},E.\u0275cmp=o.Xpm({type:E,selectors:[["app-bedrooms-detail"]],features:[o.qOj],decls:37,vars:16,consts:[["header",""],[1,"modal-title"],["body",""],[1,"form-material",3,"formGroup"],[1,"row"],[1,"col-md-6"],["label","No. Habitaci\xf3n",3,"control"],["type","text","formControlName","noHabitacion",1,"form-control"],[3,"control"],["control","alojamientoId","bindLabel","nombre","label","Nombre del Alojamiento","value","id",3,"form","data","readonly","fetchItems","change"],[1,"col-md-6","pt-4"],["label","Preferencias",3,"control"],["formControlName","preferencias",1,"form-control",3,"searchable","clearable"],["value","SIMPLE"],["value","BA\xd1O PRIVADO"],["label","Estado",3,"control"],["formControlName","estado",1,"form-control",3,"searchable","clearable"],["value","OCUPADO"],["value","LIBRE"],["value","SUCIO"],["footer",""],[1,"d-flex","justify-content-center"],[1,"m-3"],[3,"type","disabled","confirm"],["type","button",1,"btn","btn-danger","active",3,"click"]],template:function(_,n){1&_&&(o.TgZ(0,"app-modal")(1,"div",0)(2,"h5",1),o._uU(3),o.qZA()(),o.TgZ(4,"div",2)(5,"form",3)(6,"div",4)(7,"div",5)(8,"form-field",6),o._UZ(9,"input",7),o.qZA()(),o.TgZ(10,"div",5)(11,"form-field",8)(12,"ngx-select",9),o.NdJ("fetchItems",function(i){return n.getAccomodation(i)})("change",function(i){return n.onChangeAccomodation(i)}),o.qZA()()()(),o.TgZ(13,"div",4)(14,"div",10)(15,"form-field",11)(16,"ng-select",12)(17,"ng-option",13),o._uU(18,"SIMPLE"),o.qZA(),o.TgZ(19,"ng-option",14),o._uU(20,"BA\xd1O PRIVADO"),o.qZA()()()(),o.TgZ(21,"div",10)(22,"form-field",15)(23,"ng-select",16)(24,"ng-option",17),o._uU(25,"OCUPADO"),o.qZA(),o.TgZ(26,"ng-option",18),o._uU(27,"LIBRE"),o.qZA(),o.TgZ(28,"ng-option",19),o._uU(29,"SUCIO"),o.qZA()()()()()()(),o.TgZ(30,"div",20)(31,"div",21)(32,"div",22)(33,"confirm-button",23),o.NdJ("confirm",function(){return n.confirm()}),o.qZA()(),o.TgZ(34,"div",22)(35,"button",24),o.NdJ("click",function(){return n.close()}),o._uU(36," Cancelar "),o.qZA()()()()()),2&_&&(o.xp6(3),o.AsE("",n.edit?"Editar":"Nueva"," ",n.title,""),o.xp6(2),o.Q6J("formGroup",n.form),o.xp6(3),o.Q6J("control",n.form.get("noHabitacion")),o.xp6(3),o.Q6J("control",n.form.get("alojamientoId")),o.xp6(1),o.Q6J("form",n.form)("data",n.accomodations)("readonly",!1),o.xp6(3),o.Q6J("control",n.form.get("preferencias")),o.xp6(1),o.Q6J("searchable",!1)("clearable",!1),o.xp6(6),o.Q6J("control",n.form.get("estado")),o.xp6(1),o.Q6J("searchable",!1)("clearable",!1),o.xp6(10),o.Q6J("type","button")("disabled",n.form.invalid))},dependencies:[c._Y,c.Fj,c.JJ,c.JL,I.w9,I.jq,D.z,A.h,b.f,c.sg,c.u,C.H]}),E})()},2510:(O,v,t)=>{t.d(v,{F:()=>E});var c=t(9671),r=t(4006),u=t(168),g=t(8268),m=t(999),o=t(4553),e=t(1571),l=t(388),f=t(6913),I=t(6698),D=t(8796),A=t(312),b=t(4576),C=t(7597),M=t(7209);let E=(()=>{class h extends g.nh{constructor(n,s,i,a){super(),this.modalRef=n,this.fb=s,this.accomodationService=i,this.customersService=a,this.form=new r.cw({}),this.title="CLIENTE",this.edit=!1,this.accomodations=new o.b}get alojaId(){return this.form.get("alojamientoId")}ngOnInit(){this.prepareForm()}prepareForm(){this.form=this.fb.group({nombre:[null,[r.kI.required,r.kI.pattern(m.Fv)]],paterno:[null,[r.kI.required,r.kI.pattern(m.Fv)]],materno:[null,[r.kI.required,r.kI.pattern(m.Fv)]],ci:[null,[r.kI.required,r.kI.pattern(m.bu)]],extencion:[null,[r.kI.required,r.kI.pattern(m.Fv)]],alojamientoId:[null,[r.kI.required]]}),this.idAloja&&(this.form.controls.alojamientoId.disable(),this.alojaId.setValue(this.idAloja)),null!=this.customer&&(this.edit=!0,this.form.patchValue(this.customer)),setTimeout(()=>{this.getAccomodation(new u.NV)},500)}confirm(){this.edit?this.update():this.create()}create(){this.loading=!0;let n=this.form.getRawValue();this.customersService.create(n).subscribe({next:s=>{this.handleSuccess(),this.loading=!1},error:s=>{this.loading=!1}})}handleSuccess(){this.alert("success",this.title,(this.edit?"Actualizada":"Guardada")+" Correctamente"),this.loading=!1,this.modalRef.content.callback(!0),this.modalRef.hide()}update(){if(this.customer){this.loading=!0;let n=this.form.getRawValue();this.customersService.update(this.customer.id,n).subscribe({next:s=>{this.loading=!1,this.handleSuccess()},error:s=>{this.loading=!1}})}}getAccomodation(n){n.text&&(n["filter.nombre"]=`$ilike:${n.text}`),this.accomodationService.getAll(n).subscribe({next:s=>{this.result=s.data.map(function(){var i=(0,c.Z)(function*(a){a.nomDir=a.nombre+" - "+a.direccion});return function(a){return i.apply(this,arguments)}}()),this.accomodations=new o.b(s.data,s.count)},error:s=>{this.accomodations=new o.b,this.loading=!1}})}onChangeAccomodation(n){console.log(n)}close(){this.modalRef.hide()}}return h.\u0275fac=function(n){return new(n||h)(e.Y36(l.UZ),e.Y36(r.qu),e.Y36(f.A),e.Y36(I.v))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-customers-detail"]],features:[e.qOj],decls:51,vars:16,consts:[["header",""],[1,"modal-title"],["body",""],[1,"form-material",3,"formGroup"],[1,"row"],[1,"col-md-4"],["label","Nombre",3,"control"],["type","text","formControlName","nombre",1,"form-control"],["label","Paterno",3,"control"],["type","text","formControlName","paterno",1,"form-control"],["label","Materno",3,"control"],["type","text","formControlName","materno",1,"form-control"],[1,"row","pt-4"],[1,"col-md-3"],["label","CI",3,"control"],["type","number","formControlName","ci","maxlength","15","min","1","oninput","if(this.value.length > 10) this.value = this.value.slice(0, 10);",1,"form-control"],[1,"col-md-2"],["label","Expedido",3,"control"],["formControlName","extencion",1,"form-control",3,"searchable","clearable"],["value","LP"],["value","OR"],["value","PT"],["value","CBBA"],["value","CH"],["value","TJA"],["value","SCZ"],["value","BE"],["value","PD"],[1,"col-md-7"],[3,"control"],["control","alojamientoId","bindLabel","nomDir","label","Alojamiento","value","id",3,"form","data","readonly","fetchItems","change"],["footer",""],[1,"d-flex","justify-content-center"],[1,"m-3"],[3,"type","disabled","confirm"],["type","button",1,"btn","btn-danger","active",3,"click"]],template:function(n,s){1&n&&(e.TgZ(0,"app-modal")(1,"div",0)(2,"h5",1),e._uU(3),e.qZA()(),e.TgZ(4,"div",2)(5,"form",3)(6,"div",4)(7,"div",5)(8,"form-field",6),e._UZ(9,"input",7),e.qZA()(),e.TgZ(10,"div",5)(11,"form-field",8),e._UZ(12,"input",9),e.qZA()(),e.TgZ(13,"div",5)(14,"form-field",10),e._UZ(15,"input",11),e.qZA()()(),e.TgZ(16,"div",12)(17,"div",13)(18,"form-field",14),e._UZ(19,"input",15),e.qZA()(),e.TgZ(20,"div",16)(21,"form-field",17)(22,"ng-select",18)(23,"ng-option",19),e._uU(24,"LP"),e.qZA(),e.TgZ(25,"ng-option",20),e._uU(26,"OR"),e.qZA(),e.TgZ(27,"ng-option",21),e._uU(28,"PT"),e.qZA(),e.TgZ(29,"ng-option",22),e._uU(30,"CBBA"),e.qZA(),e.TgZ(31,"ng-option",23),e._uU(32,"CH"),e.qZA(),e.TgZ(33,"ng-option",24),e._uU(34,"TJA"),e.qZA(),e.TgZ(35,"ng-option",25),e._uU(36,"SCZ"),e.qZA(),e.TgZ(37,"ng-option",26),e._uU(38,"BE"),e.qZA(),e.TgZ(39,"ng-option",27),e._uU(40,"PD"),e.qZA()()()(),e.TgZ(41,"div",28)(42,"form-field",29)(43,"ngx-select",30),e.NdJ("fetchItems",function(a){return s.getAccomodation(a)})("change",function(a){return s.onChangeAccomodation(a)}),e.qZA()()()()()(),e.TgZ(44,"div",31)(45,"div",32)(46,"div",33)(47,"confirm-button",34),e.NdJ("confirm",function(){return s.confirm()}),e.qZA()(),e.TgZ(48,"div",33)(49,"button",35),e.NdJ("click",function(){return s.close()}),e._uU(50," Cancelar "),e.qZA()()()()()),2&n&&(e.xp6(3),e.AsE("",s.edit?"Editar":"Nuevo"," ",s.title,""),e.xp6(2),e.Q6J("formGroup",s.form),e.xp6(3),e.Q6J("control",s.form.get("nombre")),e.xp6(3),e.Q6J("control",s.form.get("paterno")),e.xp6(3),e.Q6J("control",s.form.get("materno")),e.xp6(4),e.Q6J("control",s.form.get("ci")),e.xp6(3),e.Q6J("control",s.form.get("extencion")),e.xp6(1),e.Q6J("searchable",!1)("clearable",!1),e.xp6(20),e.Q6J("control",s.form.get("alojamientoId")),e.xp6(1),e.Q6J("form",s.form)("data",s.accomodations)("readonly",!1),e.xp6(4),e.Q6J("type","button")("disabled",s.form.invalid))},dependencies:[r._Y,r.Fj,r.wV,r.JJ,r.JL,r.nD,r.qQ,D.w9,D.jq,A.z,b.h,C.f,r.sg,r.u,M.H]}),h})()},9865:(O,v,t)=>{t.d(v,{x:()=>_});var c=t(6895),r=t(4006),u=t(168),g=t(8268),m=t(999),o=t(4553),e=t(1571),l=t(388),f=t(6913),I=t(5358),D=t(4702),A=t(312),b=t(4576),C=t(7597),M=t(7209);const E=function(){return{dateInputFormat:"DD/MM/YYYY",displayOneMonthRange:!0}},h=function(){return{dateInputFormat:"MMMM",minMode:"month",adaptivePosition:!0}};let _=(()=>{class n extends g.nh{constructor(i,a,p,d,P){super(),this.modalRef=i,this.fb=a,this.accomodationService=p,this.inventoriesService=d,this.datePipe=P,this.form=new r.cw({}),this.title="INVENTARIO",this.status="Nuevo",this.edit=!1,this.maxDate=new Date,this.idAccom=0,this.accomodations=new o.b}ngOnInit(){this.prepareForm()}prepareForm(){if(this.form=this.fb.group({fecha:[null,[r.kI.required,r.kI.pattern(m.Fv)]],alojamientoId:[this.idAccom,[r.kI.required,r.kI.pattern(m.bu)]],descripcion:[null,[r.kI.required,r.kI.pattern(m.Fv),r.kI.maxLength(400)]]}),this.form.controls.alojamientoId.disable(),this.form.controls.descripcion.disable(),null!=this.inventories){this.edit=!0;const i=this.datePipe.transform(this.inventories.fecha,"dd/MM/yyyy");this.form.patchValue(this.inventories),this.form.controls.fecha.setValue(i),new Date(this.inventories.fecha)}setTimeout(()=>{this.getAccomodation(new u.NV)},1e3)}confirm(){this.edit?this.update():this.create()}create(){this.loading=!0;const i=this.form.controls.descripcion.value;console.log(i);const a=(0,c.p6)(i,"MMMM","es-ES");console.log(a.toUpperCase());let p={descripcion:a.toUpperCase(),fecha:this.form.controls.fecha.getRawValue(),alojamientoId:Number(this.form.controls.alojamientoId.getRawValue())};this.inventoriesService.create(p).subscribe({next:d=>{this.handleSuccess(),this.loading=!1},error:d=>{this.loading=!1}})}handleSuccess(){this.alert("success",this.title,(this.edit?"Actualizada":"Guardada")+" Correctamente"),this.loading=!1,this.modalRef.content.callback(!0),this.modalRef.hide()}update(){if(this.inventories){this.loading=!0;let d={descripcion:(0,c.p6)(this.form.controls.descripcion.value,"MMMM","es-ES").toUpperCase(),fecha:this.editDate,alojamientoId:Number(this.form.controls.alojamientoId.getRawValue())};this.inventoriesService.update(this.inventories.id,d).subscribe({next:P=>{this.loading=!1,this.handleSuccess()},error:P=>{this.loading=!1}})}}close(){this.modalRef.hide()}getAccomodation(i){i["filter.id"]=`$eq:${this.idAccom}`,this.accomodationService.getAll(i).subscribe({next:a=>{this.accomodations=new o.b(a.data,a.count)},error:a=>{this.accomodations=new o.b,this.loading=!1}})}onChangeAccomodation(i){console.log(i)}validateDate(i){i&&(this.editDate=i,this.form.controls.descripcion.setValue(this.editDate))}}return n.\u0275fac=function(i){return new(i||n)(e.Y36(l.UZ),e.Y36(r.qu),e.Y36(f.A),e.Y36(I.H),e.Y36(c.uU))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-inventories-detail"]],features:[e.qOj],decls:23,vars:17,consts:[["header",""],[1,"modal-title"],["body",""],[1,"form-material",3,"formGroup"],[1,"row"],[1,"col-md-4"],[3,"control"],["control","alojamientoId","bindLabel","nombre","label","Nombre del Alojamiento","value","id",3,"form","data","readonly","fetchItems","change"],[1,"col-md-3"],["label","Fecha",3,"control"],["type","text","formControlName","fecha","bsDatepicker","",1,"form-control",3,"bsConfig","maxDate","bsValueChange"],[1,"col-md-5"],["label","Descripci\xf3n",3,"control"],["type","text","formControlName","descripcion","bsDatepicker","",1,"form-control",3,"bsConfig","maxDate","bsValueChange"],["footer",""],[1,"d-flex","justify-content-center"],[1,"m-3"],[3,"type","disabled","confirm"],["type","button",1,"btn","btn-danger","active",3,"click"]],template:function(i,a){1&i&&(e.TgZ(0,"app-modal")(1,"div",0)(2,"h5",1),e._uU(3),e.qZA()(),e.TgZ(4,"div",2)(5,"form",3)(6,"div",4)(7,"div",5)(8,"form-field",6)(9,"ngx-select",7),e.NdJ("fetchItems",function(d){return a.getAccomodation(d)})("change",function(d){return a.onChangeAccomodation(d)}),e.qZA()()(),e.TgZ(10,"div",8)(11,"form-field",9)(12,"input",10),e.NdJ("bsValueChange",function(d){return a.validateDate(d)}),e.qZA()()(),e.TgZ(13,"div",11)(14,"form-field",12)(15,"input",13),e.NdJ("bsValueChange",function(d){return a.validateDate(d)}),e.qZA()()()()()(),e.TgZ(16,"div",14)(17,"div",15)(18,"div",16)(19,"confirm-button",17),e.NdJ("confirm",function(){return a.confirm()}),e.qZA()(),e.TgZ(20,"div",16)(21,"button",18),e.NdJ("click",function(){return a.close()}),e._uU(22," Cancelar "),e.qZA()()()()()),2&i&&(e.xp6(3),e.AsE("",a.edit?"Editar":"Nuevo"," ",a.title,""),e.xp6(2),e.Q6J("formGroup",a.form),e.xp6(3),e.Q6J("control",a.form.get("alojamientoId")),e.xp6(1),e.Q6J("form",a.form)("data",a.accomodations)("readonly",!1),e.xp6(2),e.Q6J("control",a.form.get("fecha")),e.xp6(1),e.Q6J("bsConfig",e.DdM(15,E))("maxDate",a.maxDate),e.xp6(2),e.Q6J("control",a.form.get("descripcion")),e.xp6(1),e.Q6J("bsConfig",e.DdM(16,h))("maxDate",a.maxDate),e.xp6(4),e.Q6J("type","button")("disabled",a.form.invalid))},dependencies:[D.Np,D.Y5,r._Y,r.Fj,r.JJ,r.JL,A.z,b.h,C.f,r.sg,r.u,M.H]}),n})()}}]);