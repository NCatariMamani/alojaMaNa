"use strict";(self.webpackChunkalojamiento_frontend=self.webpackChunkalojamiento_frontend||[]).push([[406],{6913:(N,A,n)=>{n.d(A,{A:()=>b});var e=n(5551),i=n(8463),f=n(1571),T=n(4833);let b=(()=>{class g extends i.O{constructor(r){super(),this.accomodationRepo=r,this.router=e.J.Alojamientos}getAll(r){return this.accomodationRepo.getAll(this.router,r)}getById(r){return this.accomodationRepo.getById(this.router,r)}create(r){return this.accomodationRepo.create(this.router,r)}update(r,u){return this.accomodationRepo.updateTypeServices(this.router,r,u)}remove(r){return this.accomodationRepo.remove(this.router,r)}}return g.\u0275fac=function(r){return new(r||g)(f.LFG(T._))},g.\u0275prov=f.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},999:(N,A,n)=>{n.d(A,{Fv:()=>h,K2:()=>E,QI:()=>e,bu:()=>f});const e="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+.[a-zA-Z]{2,4}$",f="^-?[0-9]+$",E="[+]?([0-9]*[.])?[0-9]+",h='(?![\\s])[a-zA-Z0-9\xe1\xe8\xe9\xed\xf3\xfa\xc1\xc8\xc9\xcd\xd3\xda\xf1\xd1\\/\\s\\.,_\\-\\\\()$\xb0\\\xdc\xfc\u201c\u201d"";:%]*'},4212:(N,A,n)=>{n.r(A),n.d(A,{InventoriesModule:()=>l});var e=n(6895),i=n(8909),f=n(388),T=n(6646),b=n(4385),g=n(1135),S=n(2722),r=n(168),u=n(8268);const h={id:{title:"ID",sort:!1,width:"10%"},descripcion:{title:"Descripci\xf3n",sort:!1},alojamientos:{title:"Nombre de Alojamiento",sort:!1,valuePrepareFunction:o=>o?.nombre,filterFunction:(o,d)=>"string"!=typeof d||o.nombre?.toUpperCase()>=d.toUpperCase()||""===d},fecha:{title:"Fecha",sort:!1,valuePrepareFunction:o=>{var d=new Date(o);return new e.uU("en-EN").transform(d,"dd/MM/yyyy","UTC")},filter:{type:"custom",component:n(9267).j}}};var v=n(9865),s=n(1571),C=n(6913),L=n(5358),y=n(9219),P=n(2243),x=n(4554);const I=[{path:"",component:(()=>{class o extends u.nh{constructor(a,c,p){super(),this.modalService=a,this.accomodationService=c,this.inventoriesService=p,this.data=new b.nC,this.params=new g.X(new r.NV),this.data1=[],this.columnFilters=[],this.totalItems=0,this.settings={...this.settings,hideSubHeader:!1,actions:{columnTitle:"Acciones",edit:!0,delete:!0,add:!1,position:"right"},columns:{...h}}}ngOnInit(){this.data.onChanged().pipe((0,S.R)(this.$unSubscribe)).subscribe(a=>{"filter"===a.action&&(a.filter.filters.map(p=>{let _="",R=r.ay.ILIKE;switch(_=`filter.${p.field}`,p.field){case"id":R=r.ay.EQ;break;case"fecha":p.search=this.returnParseDate(p.search),R=r.ay.EQ;break;case"alojamientos":R=r.ay.ILIKE,_=`filter.${p.field}.nombre`;break;default:R=r.ay.ILIKE}""!==p.search?this.columnFilters[_]=`${R}:${p.search}`:delete this.columnFilters[_]}),this.params=this.pageFilter(this.params),this.getAllInventories())}),this.params.pipe((0,S.R)(this.$unSubscribe)).subscribe(()=>this.getAllInventories())}getAllInventories(){this.loading=!0;let a={...this.params.getValue(),...this.columnFilters};this.inventoriesService.getAll(a).subscribe({next:c=>{console.log(c),this.data.load(c.data),this.data.refresh(),this.totalItems=c.count,this.loading=!1},error:c=>{this.loading=!1,this.data.load([])}})}edit(a){this.openModal(a)}openModal(a){this.modalService.show(v.x,{initialState:{inventories:a,callback:p=>{p&&this.getAllInventories()}},class:"modal-lg modal-dialog-centered",ignoreBackdropClick:!0})}showDeleteAlert(a){this.alertQuestion("warning","Eliminar","\xbfDesea eliminar este registro?").then(c=>{c.isConfirmed&&this.delete(a.id)})}delete(a){this.inventoriesService.remove(a).subscribe({next:()=>{this.alert("success","Inventario","Borrado Correctamente"),this.params.pipe((0,S.R)(this.$unSubscribe)).subscribe(()=>this.getAllInventories())},error:c=>{this.alert("error","No se logro Eliminar","Existe una relacion")}})}}return o.\u0275fac=function(a){return new(a||o)(s.Y36(f.tT),s.Y36(C.A),s.Y36(L.H))},o.\u0275cmp=s.Xpm({type:o,selectors:[["app-inventories-list"]],features:[s.qOj],decls:19,vars:9,consts:[[3,"header"],["header","",1,"ch-content"],[1,"title"],["body",""],[1,"row"],[1,"col-md-8","mb-3"],[1,"col-md-4","text-end","d-flex","flex-row-reverse","mb-3"],[1,"mr-3"],["type","button","tooltip","Nuevo","containerclass","tooltip-style",1,"btn","btn-info","btn-sm","active","d-flex","justify-content-center","align-items-center","ml-3",3,"click"],[1,"bx","bx-plus","bx-sm","ml-2"],[3,"settings","leftList","settingsChange"],[1,"col-md-12"],[1,"table-responsive"],[3,"settings","source","edit","delete"],[3,"params","totalItems"]],template:function(a,c){1&a&&(s.TgZ(0,"app-card",0)(1,"div",1)(2,"h5",2),s._uU(3,"INVENTARIOS"),s.qZA()(),s.TgZ(4,"div",3)(5,"div",4),s._UZ(6,"div",5),s.TgZ(7,"div",6)(8,"div",7)(9,"button",8),s.NdJ("click",function(){return c.openModal()}),s._uU(10," Nuevo "),s._UZ(11,"i",9),s.qZA()(),s.TgZ(12,"app-columns-select",10),s.NdJ("settingsChange",function(_){return c.settings=_}),s.qZA()()(),s.TgZ(13,"div",4)(14,"div",11)(15,"div")(16,"div",12)(17,"ng2-smart-table",13),s.NdJ("edit",function(_){return c.edit(_.data)})("delete",function(_){return c.showDeleteAlert(_.data)}),s.qZA()(),s._UZ(18,"app-pagination",14),s.qZA()()()()()),2&a&&(s.Q6J("header",!0),s.xp6(12),s.Q6J("settings",c.settings)("leftList",!0),s.xp6(3),s.Tol(c.loading?"table-loading":""),s.xp6(2),s.Q6J("settings",c.settings)("source",c.data),s.xp6(1),s.Q6J("params",c.params)("totalItems",c.totalItems))},dependencies:[y.A,P.L,b.T5,x.Q]}),o})()}];let t=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=s.oAB({type:o}),o.\u0275inj=s.cJS({imports:[T.Bz.forChild(I),T.Bz]}),o})(),l=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=s.oAB({type:o}),o.\u0275inj=s.cJS({imports:[e.ez,i.m8,f.zk.forChild(),t]}),o})()},7209:(N,A,n)=>{n.d(A,{H:()=>x});var e=n(1571),i=n(4006),f=n(8796),T=n(7579),b=n(2722),g=n(8372),S=n(1884),r=n(3900),u=n(9646),h=n(168),v=n(4553),s=n(6895);function C(m,I){if(1&m&&(e.TgZ(0,"div",10),e._uU(1),e.qZA()),2&m){const t=I.item,l=e.oxw(3);e.Q6J("title",t[l.bindLabel]),e.xp6(1),e.Oqu(t[l.bindLabel])}}function L(m,I){1&m&&e.YNc(0,C,2,2,"ng-template",9)}function y(m,I){1&m&&(e.TgZ(0,"span"),e._uU(1,"*"),e.qZA()),2&m&&e.Udp("color","#9D2449")}function P(m,I){if(1&m){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"ng-select",3,4),e.NdJ("scrollToEnd",function(){e.CHM(t);const o=e.MAs(3),d=e.oxw();return e.KtG(d.fetchMore(o.searchTerm))})("change",function(o){e.CHM(t);const d=e.oxw();return e.KtG(d.onChange(o))})("clear",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.clear.emit())}),e.YNc(4,L,1,0,null,5),e.qZA(),e._UZ(5,"span",6),e.TgZ(6,"label",7),e._uU(7),e.YNc(8,y,2,2,"span",8),e.qZA()(),e.BQk()}if(2&m){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("clearable",t.clearable)("items",t.buffer)("bindLabel",t.bindLabel)("hideSelected",!0)("closeOnSelect",t.closeOnSelect)("maxSelectedItems",t.maxSelectedItems)("multiple",t.multiple)("bindValue",t.value)("minTermLength",0)("loading",t.loading)("addTag",t.addTag)("typeToSearchText",t.typeToSearchText)("typeahead",t.input$)("virtualScroll",!0)("formControlName",t.control)("searchable",t.searchable)("placeholder",t.placeholder)("readonly",t.readonly)("inputAttrs",t.inputAttrs)("title",t.title),e.uIk("class",t.className+" form-control"),e.xp6(2),e.Q6J("ngIf",t.showTooltip),e.xp6(3),e.hij("",t.label," "),e.xp6(1),e.Q6J("ngIf",t.isRequired())}}let x=(()=>{class m{constructor(t){this.fb=t,this.fetchByList=!0,this.control="",this.value="",this.bindLabel="",this.label="",this.placeholder="",this.data=new v.b,this.multiple=!1,this.addTag=!1,this.loading=!1,this.closeOnSelect=!0,this.maxSelectedItems=0,this.searchable=!0,this.searchOnInit=!1,this.typeToSearchText="Escriba 3 o m\xe1s caracteres",this.paramFilter="search",this.fetchItems=new e.vpe,this.fetchByParamsItems=new e.vpe,this.clear=new e.vpe,this.operator=h.ay.EQ,this.change=new e.vpe,this.readonly=!1,this.clearable=!0,this.showTooltip=!1,this.loadingInit=!1,this.className="",this.buffer=[],this.input$=new T.x,this.page=1,this.totalItems=0,this.inputAttrs={maxLength:""},this.title="",this.$unSubscribe=new T.x,this.concat=!1,this.selectSize=10}ngOnInit(){if(this.searchOnInit)if(this.fetchByList){this.loadingInit&&(this.loading=!0);const t=new h.NV;this.fetchItems.emit(t)}else{const t=new h.GQ;this.fetchByParamsItems.emit(t)}if(this.onSearch(),this.checkMaxAttribute(),this.showTooltip&&(this.updateTitle(),this.form&&this.control)){const t=this.form.get(this.control);t&&t.valueChanges.pipe((0,b.R)(this.$unSubscribe)).subscribe({next:l=>{null!=l&&this.updateTitle()},error:()=>{}})}}ngAfterViewInit(){this.labelTemplate&&this.ngSelect&&(this.ngSelect.labelTemplate=this.labelTemplate),this.optionTemplate&&this.ngSelect&&(this.ngSelect.optionTemplate=this.optionTemplate)}ngOnChanges(t){1==t.data?.currentValue?.reset&&(this.buffer=[],this.page=1),0===t.data?.currentValue?.length?this.buffer=[]:t.data&&this.concat?this.buffer=[...this.buffer,...this.data.data]:(this.buffer=this.data?.data,this.totalItems=this.data?.count),this.loading=!1}emitListParams(t){this.fetchItems.emit({page:this.page,text:t??"",limit:this.selectSize,search:t??""})}filterParams(t){let l=new h.GQ;l.page=this.page,l.limit=this.selectSize,"search"===this.paramFilter?l.search=t??"":t&&t.length>0&&l.addFilter(this.paramFilter,t,this.operator),this.fetchByParamsItems.emit(l)}fetchMore(t){!this.loading&&this.buffer.length<this.totalItems&&(this.page++,this.loading=!0,this.concat=!0,this.fetchByList?this.emitListParams(t):this.filterParams(t))}onSearch(){this.input$.pipe((0,g.b)(1e3),(0,S.x)(),(0,r.w)(t=>(null===t||(console.log(t),this.page=1,this.buffer=[],this.loading=!0,this.concat=!1,this.fetchByList?this.emitListParams(t):this.filterParams(t)),(0,u.of)([])))).subscribe()}onChange(t){this.change.emit(t),this.showTooltip&&t&&(t[this.bindLabel]?this.title=t[this.bindLabel]:t[this.value]&&(this.title=t[this.value]))}getLabel(t){return t[this.bindLabel]??""}isRequired(){if(this.form&&this.control){const t=this.form.get(this.control);if(t)return t.hasValidator(i.kI.required)}return!1}checkMaxAttribute(){null!=this.termMaxLength&&(this.inputAttrs.maxLength=this.termMaxLength)}updateTitle(){if(this.control&&this.form){const t=this.form.get(this.control);t&&("object"==typeof t.value&&null!=t.value?t.value[this.bindLabel]&&(this.title=t.value[this.bindLabel]):null!=t.value&&(this.title=t.value))}}ngOnDestroy(){this.$unSubscribe.next(),this.$unSubscribe.complete()}}return m.\u0275fac=function(t){return new(t||m)(e.Y36(i.qu))},m.\u0275cmp=e.Xpm({type:m,selectors:[["ngx-select"]],viewQuery:function(t,l){if(1&t&&e.Gf(f.w9,5),2&t){let o;e.iGM(o=e.CRH())&&(l.ngSelect=o.first)}},inputs:{form:"form",fetchByList:"fetchByList",control:"control",value:"value",bindLabel:"bindLabel",label:"label",placeholder:"placeholder",data:"data",multiple:"multiple",addTag:"addTag",loading:"loading",closeOnSelect:"closeOnSelect",maxSelectedItems:"maxSelectedItems",searchable:"searchable",searchOnInit:"searchOnInit",typeToSearchText:"typeToSearchText",paramFilter:"paramFilter",operator:"operator",readonly:"readonly",clearable:"clearable",termMaxLength:"termMaxLength",showTooltip:"showTooltip",labelTemplate:"labelTemplate",optionTemplate:"optionTemplate",loadingInit:"loadingInit",className:"className"},outputs:{fetchItems:"fetchItems",fetchByParamsItems:"fetchByParamsItems",clear:"clear",change:"change"},features:[e.TTD],decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"form-group","form-secondary","form-static-label","pt-2"],["notFoundText","No se encontraron elementos",1,"form-control",3,"clearable","items","bindLabel","hideSelected","closeOnSelect","maxSelectedItems","multiple","bindValue","minTermLength","loading","addTag","typeToSearchText","typeahead","virtualScroll","formControlName","searchable","placeholder","readonly","inputAttrs","title","scrollToEnd","change","clear"],["select",""],[4,"ngIf"],[1,"form-bar"],[1,"float-label"],[3,"color",4,"ngIf"],["ng-option-tmp",""],[3,"title"]],template:function(t,l){1&t&&e.YNc(0,P,9,25,"ng-container",0),2&t&&e.Q6J("ngIf",l.form)},dependencies:[s.O5,i.JJ,i.JL,i.sg,i.u,f.w9,f.ir],styles:[".form-control[_ngcontent-%COMP%]{height:auto!important}"]}),m})()},9267:(N,A,n)=>{n.d(A,{j:()=>r});var e=n(4385),i=n(1571),f=n(6895),T=n(4006),b=n(4702);function g(u,E){if(1&u){const h=i.EpF();i.TgZ(0,"span",3)(1,"i",4),i.NdJ("click",function(s){i.CHM(h);const C=i.oxw();return i.KtG(C.clearDate(s))}),i.qZA()()}}const S=function(){return{dateInputFormat:"DD/MM/YYYY"}};let r=(()=>{class u extends e.tS{onChange(h){this.query=h,this.setFilter()}ngOnChanges(){}clearDate(h){h.stopPropagation(),this.query="",this.setFilter()}}return u.\u0275fac=function(){let E;return function(v){return(E||(E=i.n5z(u)))(v||u)}}(),u.\u0275cmp=i.Xpm({type:u,selectors:[["ng-component"]],inputs:{someInput:"someInput"},features:[i.qOj,i.TTD],decls:3,vars:5,consts:[[1,"input-group",2,"margin-bottom","0px"],["type","text","bsDatepicker","",1,"form-control",2,"border-radius","5px","padding","8px","border","1px solid #ccc",3,"ngModel","bsConfig","placeholder","ngModelChange"],["class","input-group-addon",4,"ngIf"],[1,"input-group-addon"],[1,"fa","fa-trash","red-icon",2,"color","#9D2449",3,"click"]],template:function(h,v){1&h&&(i.TgZ(0,"div",0)(1,"input",1),i.NdJ("ngModelChange",function(C){return v.onChange(C)}),i.qZA(),i.YNc(2,g,2,0,"span",2),i.qZA()),2&h&&(i.xp6(1),i.Q6J("ngModel",v.query)("bsConfig",i.DdM(4,S))("placeholder",v.column.title),i.xp6(1),i.Q6J("ngIf",v.query))},dependencies:[f.O5,T.Fj,T.JJ,T.On,b.Np,b.Y5],encapsulation:2}),u})()}}]);