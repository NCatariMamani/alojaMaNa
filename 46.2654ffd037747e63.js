"use strict";(self.webpackChunkalojamiento_frontend=self.webpackChunkalojamiento_frontend||[]).push([[46],{6913:(I,T,s)=>{s.d(T,{A:()=>v});var e=s(5551),d=s(8463),h=s(1571),E=s(4833);let v=(()=>{class m extends d.O{constructor(i){super(),this.accomodationRepo=i,this.router=e.J.Alojamientos}getAll(i){return this.accomodationRepo.getAll(this.router,i)}getById(i){return this.accomodationRepo.getById(this.router,i)}create(i){return this.accomodationRepo.create(this.router,i)}update(i,p){return this.accomodationRepo.updateTypeServices(this.router,i,p)}remove(i){return this.accomodationRepo.remove(this.router,i)}}return m.\u0275fac=function(i){return new(i||m)(h.LFG(E._))},m.\u0275prov=h.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},6698:(I,T,s)=>{s.d(T,{v:()=>v});var e=s(5551),d=s(8463),h=s(1571),E=s(4833);let v=(()=>{class m extends d.O{constructor(i){super(),this.customerRepo=i,this.router=e.J.Clientes}getAll(i){return this.customerRepo.getAll(this.router,i)}getById(i){return this.customerRepo.getById(this.router,i)}getAllAlojaClientesById(i,p){return this.customerRepo.getById02(`${this.router}/getByIdAlojaCli`,i,p)}getAllVentaClientesById(i,p){return this.customerRepo.getById02(`${this.router}/getVentaCliente`,i,p)}create(i){return this.customerRepo.create(this.router,i)}update(i,p){return this.customerRepo.updateTypeServices(this.router,i,p)}remove(i){return this.customerRepo.remove(this.router,i)}}return m.\u0275fac=function(i){return new(i||m)(h.LFG(E._))},m.\u0275prov=h.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},999:(I,T,s)=>{s.d(T,{Fv:()=>b,K2:()=>S,QI:()=>e,bu:()=>h});const e="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+.[a-zA-Z]{2,4}$",h="^-?[0-9]+$",S="[+]?([0-9]*[.])?[0-9]+",b='(?![\\s])[a-zA-Z0-9\xe1\xe8\xe9\xed\xf3\xfa\xc1\xc8\xc9\xcd\xd3\xda\xf1\xd1\\/\\s\\.,_\\-\\\\()$\xb0\\\xdc\xfc\u201c\u201d"";:%]*'},9403:(I,T,s)=>{s.r(T),s.d(T,{CustomersModule:()=>t});var e=s(6895),d=s(8909),h=s(388),E=s(6646),v=s(8268);const m={id:{title:"ID",sort:!1,width:"10%"},nombre:{title:"Nombre",sort:!1,width:"10%"},paterno:{title:"Paterno",sort:!1},materno:{title:"Materno",sort:!1},ci:{title:"CI",sort:!1},extencion:{title:"Extenci\xf3n",sort:!1},alojamientos:{title:"Nombre de Alojamiento",sort:!1,valuePrepareFunction:o=>o?.nombre,filterFunction:(o,l)=>"string"!=typeof l||o.nombre?.toUpperCase()>=l.toUpperCase()||""===l}};var A=s(4385),i=s(168),p=s(1135),S=s(2722),b=s(2510),n=s(1571),R=s(6913),L=s(6698),M=s(9219),y=s(2243),N=s(4554);const c=[{path:"",component:(()=>{class o extends v.nh{constructor(a,r,u){super(),this.accomodationService=a,this.customersService=r,this.modalService=u,this.data=new A.nC,this.params=new p.X(new i.NV),this.columnFilters=[],this.totalItems=0,this.settings={...this.settings,hideSubHeader:!1,actions:{columnTitle:"Acciones",edit:!0,delete:!0,add:!1,position:"right"},columns:{...m}}}ngOnInit(){this.data.onChanged().pipe((0,S.R)(this.$unSubscribe)).subscribe(a=>{"filter"===a.action&&(a.filter.filters.map(u=>{let g="",_=i.ay.ILIKE;switch(g=`filter.${u.field}`,u.field){case"id":_=i.ay.EQ;break;case"alojamientos":_=i.ay.ILIKE,g=`filter.${u.field}.nombre`;break;default:_=i.ay.ILIKE}""!==u.search?this.columnFilters[g]=`${_}:${u.search}`:delete this.columnFilters[g]}),this.params=this.pageFilter(this.params),this.getAllCustomers())}),this.params.pipe((0,S.R)(this.$unSubscribe)).subscribe(()=>this.getAllCustomers())}getAllCustomers(){this.loading=!0;let a={...this.params.getValue(),...this.columnFilters};this.customersService.getAll(a).subscribe({next:r=>{console.log(r),this.data.load(r.data),this.data.refresh(),this.totalItems=r.count,this.loading=!1},error:r=>{this.loading=!1,this.data.load([])}})}edit(a){this.openModal(a)}openModal(a){this.modalService.show(b.F,{initialState:{customer:a,callback:u=>{u&&this.getAllCustomers()}},class:"modal-lg modal-dialog-centered",ignoreBackdropClick:!0})}showDeleteAlert(a){this.alertQuestion("warning","Eliminar","\xbfDesea eliminar este registro?").then(r=>{r.isConfirmed&&this.delete(a.id)})}delete(a){this.customersService.remove(a).subscribe({next:()=>{this.alert("success","Cliente","Borrado Correctamente"),this.params.pipe((0,S.R)(this.$unSubscribe)).subscribe(()=>this.getAllCustomers())},error:r=>{this.alert("error","No se logro Eliminar","Existe una relacion")}})}}return o.\u0275fac=function(a){return new(a||o)(n.Y36(R.A),n.Y36(L.v),n.Y36(h.tT))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-customers-list"]],features:[n.qOj],decls:19,vars:10,consts:[[3,"header"],["header","",1,"ch-content"],[1,"title"],["body",""],[1,"row"],[1,"col-md-8","mb-3"],[1,"col-md-4","text-end","d-flex","flex-row-reverse","mb-3"],[1,"mr-3"],["type","button","tooltip","Nuevo","containerclass","tooltip-style",1,"btn","btn-info","btn-sm","active","d-flex","justify-content-center","align-items-center","ml-3",3,"click"],[1,"bx","bx-plus","bx-sm","ml-2"],[3,"settings","leftList","defaultColumns","settingsChange"],[1,"col-md-12"],[1,"table-responsive"],[3,"settings","source","edit","delete"],[3,"params","totalItems"]],template:function(a,r){1&a&&(n.TgZ(0,"app-card",0)(1,"div",1)(2,"h5",2),n._uU(3,"CLIENTES"),n.qZA()(),n.TgZ(4,"div",3)(5,"div",4),n._UZ(6,"div",5),n.TgZ(7,"div",6)(8,"div",7)(9,"button",8),n.NdJ("click",function(){return r.openModal()}),n._uU(10," Nuevo "),n._UZ(11,"i",9),n.qZA()(),n.TgZ(12,"app-columns-select",10),n.NdJ("settingsChange",function(g){return r.settings=g}),n.qZA()()(),n.TgZ(13,"div",4)(14,"div",11)(15,"div")(16,"div",12)(17,"ng2-smart-table",13),n.NdJ("edit",function(g){return r.edit(g.data)})("delete",function(g){return r.showDeleteAlert(g.data)}),n.qZA()(),n._UZ(18,"app-pagination",14),n.qZA()()()()()),2&a&&(n.Q6J("header",!0),n.xp6(12),n.Q6J("settings",r.settings)("leftList",!0)("defaultColumns",7),n.xp6(3),n.Tol(r.loading?"table-loading":""),n.xp6(2),n.Q6J("settings",r.settings)("source",r.data),n.xp6(1),n.Q6J("params",r.params)("totalItems",r.totalItems))},dependencies:[M.A,y.L,A.T5,N.Q]}),o})()}];let f=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[E.Bz.forChild(c),E.Bz]}),o})(),t=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[e.ez,f,d.m8,h.zk.forChild()]}),o})()},7209:(I,T,s)=>{s.d(T,{H:()=>P});var e=s(1571),d=s(4006),h=s(8796),E=s(7579),v=s(2722),m=s(8372),A=s(1884),i=s(3900),p=s(9646),b=s(168),n=s(4553),R=s(6895);function L(c,f){if(1&c&&(e.TgZ(0,"div",10),e._uU(1),e.qZA()),2&c){const t=f.item,o=e.oxw(3);e.Q6J("title",t[o.bindLabel]),e.xp6(1),e.Oqu(t[o.bindLabel])}}function M(c,f){1&c&&e.YNc(0,L,2,2,"ng-template",9)}function y(c,f){1&c&&(e.TgZ(0,"span"),e._uU(1,"*"),e.qZA()),2&c&&e.Udp("color","#9D2449")}function N(c,f){if(1&c){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"ng-select",3,4),e.NdJ("scrollToEnd",function(){e.CHM(t);const l=e.MAs(3),a=e.oxw();return e.KtG(a.fetchMore(l.searchTerm))})("change",function(l){e.CHM(t);const a=e.oxw();return e.KtG(a.onChange(l))})("clear",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.clear.emit())}),e.YNc(4,M,1,0,null,5),e.qZA(),e._UZ(5,"span",6),e.TgZ(6,"label",7),e._uU(7),e.YNc(8,y,2,2,"span",8),e.qZA()(),e.BQk()}if(2&c){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("clearable",t.clearable)("items",t.buffer)("bindLabel",t.bindLabel)("hideSelected",!0)("closeOnSelect",t.closeOnSelect)("maxSelectedItems",t.maxSelectedItems)("multiple",t.multiple)("bindValue",t.value)("minTermLength",0)("loading",t.loading)("addTag",t.addTag)("typeToSearchText",t.typeToSearchText)("typeahead",t.input$)("virtualScroll",!0)("formControlName",t.control)("searchable",t.searchable)("placeholder",t.placeholder)("readonly",t.readonly)("inputAttrs",t.inputAttrs)("title",t.title),e.uIk("class",t.className+" form-control"),e.xp6(2),e.Q6J("ngIf",t.showTooltip),e.xp6(3),e.hij("",t.label," "),e.xp6(1),e.Q6J("ngIf",t.isRequired())}}let P=(()=>{class c{constructor(t){this.fb=t,this.fetchByList=!0,this.control="",this.value="",this.bindLabel="",this.label="",this.placeholder="",this.data=new n.b,this.multiple=!1,this.addTag=!1,this.loading=!1,this.closeOnSelect=!0,this.maxSelectedItems=0,this.searchable=!0,this.searchOnInit=!1,this.typeToSearchText="Escriba 3 o m\xe1s caracteres",this.paramFilter="search",this.fetchItems=new e.vpe,this.fetchByParamsItems=new e.vpe,this.clear=new e.vpe,this.operator=b.ay.EQ,this.change=new e.vpe,this.readonly=!1,this.clearable=!0,this.showTooltip=!1,this.loadingInit=!1,this.className="",this.buffer=[],this.input$=new E.x,this.page=1,this.totalItems=0,this.inputAttrs={maxLength:""},this.title="",this.$unSubscribe=new E.x,this.concat=!1,this.selectSize=10}ngOnInit(){if(this.searchOnInit)if(this.fetchByList){this.loadingInit&&(this.loading=!0);const t=new b.NV;this.fetchItems.emit(t)}else{const t=new b.GQ;this.fetchByParamsItems.emit(t)}if(this.onSearch(),this.checkMaxAttribute(),this.showTooltip&&(this.updateTitle(),this.form&&this.control)){const t=this.form.get(this.control);t&&t.valueChanges.pipe((0,v.R)(this.$unSubscribe)).subscribe({next:o=>{null!=o&&this.updateTitle()},error:()=>{}})}}ngAfterViewInit(){this.labelTemplate&&this.ngSelect&&(this.ngSelect.labelTemplate=this.labelTemplate),this.optionTemplate&&this.ngSelect&&(this.ngSelect.optionTemplate=this.optionTemplate)}ngOnChanges(t){1==t.data?.currentValue?.reset&&(this.buffer=[],this.page=1),0===t.data?.currentValue?.length?this.buffer=[]:t.data&&this.concat?this.buffer=[...this.buffer,...this.data.data]:(this.buffer=this.data?.data,this.totalItems=this.data?.count),this.loading=!1}emitListParams(t){this.fetchItems.emit({page:this.page,text:t??"",limit:this.selectSize,search:t??""})}filterParams(t){let o=new b.GQ;o.page=this.page,o.limit=this.selectSize,"search"===this.paramFilter?o.search=t??"":t&&t.length>0&&o.addFilter(this.paramFilter,t,this.operator),this.fetchByParamsItems.emit(o)}fetchMore(t){!this.loading&&this.buffer.length<this.totalItems&&(this.page++,this.loading=!0,this.concat=!0,this.fetchByList?this.emitListParams(t):this.filterParams(t))}onSearch(){this.input$.pipe((0,m.b)(1e3),(0,A.x)(),(0,i.w)(t=>(null===t||(console.log(t),this.page=1,this.buffer=[],this.loading=!0,this.concat=!1,this.fetchByList?this.emitListParams(t):this.filterParams(t)),(0,p.of)([])))).subscribe()}onChange(t){this.change.emit(t),this.showTooltip&&t&&(t[this.bindLabel]?this.title=t[this.bindLabel]:t[this.value]&&(this.title=t[this.value]))}getLabel(t){return t[this.bindLabel]??""}isRequired(){if(this.form&&this.control){const t=this.form.get(this.control);if(t)return t.hasValidator(d.kI.required)}return!1}checkMaxAttribute(){null!=this.termMaxLength&&(this.inputAttrs.maxLength=this.termMaxLength)}updateTitle(){if(this.control&&this.form){const t=this.form.get(this.control);t&&("object"==typeof t.value&&null!=t.value?t.value[this.bindLabel]&&(this.title=t.value[this.bindLabel]):null!=t.value&&(this.title=t.value))}}ngOnDestroy(){this.$unSubscribe.next(),this.$unSubscribe.complete()}}return c.\u0275fac=function(t){return new(t||c)(e.Y36(d.qu))},c.\u0275cmp=e.Xpm({type:c,selectors:[["ngx-select"]],viewQuery:function(t,o){if(1&t&&e.Gf(h.w9,5),2&t){let l;e.iGM(l=e.CRH())&&(o.ngSelect=l.first)}},inputs:{form:"form",fetchByList:"fetchByList",control:"control",value:"value",bindLabel:"bindLabel",label:"label",placeholder:"placeholder",data:"data",multiple:"multiple",addTag:"addTag",loading:"loading",closeOnSelect:"closeOnSelect",maxSelectedItems:"maxSelectedItems",searchable:"searchable",searchOnInit:"searchOnInit",typeToSearchText:"typeToSearchText",paramFilter:"paramFilter",operator:"operator",readonly:"readonly",clearable:"clearable",termMaxLength:"termMaxLength",showTooltip:"showTooltip",labelTemplate:"labelTemplate",optionTemplate:"optionTemplate",loadingInit:"loadingInit",className:"className"},outputs:{fetchItems:"fetchItems",fetchByParamsItems:"fetchByParamsItems",clear:"clear",change:"change"},features:[e.TTD],decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"form-group","form-secondary","form-static-label","pt-2"],["notFoundText","No se encontraron elementos",1,"form-control",3,"clearable","items","bindLabel","hideSelected","closeOnSelect","maxSelectedItems","multiple","bindValue","minTermLength","loading","addTag","typeToSearchText","typeahead","virtualScroll","formControlName","searchable","placeholder","readonly","inputAttrs","title","scrollToEnd","change","clear"],["select",""],[4,"ngIf"],[1,"form-bar"],[1,"float-label"],[3,"color",4,"ngIf"],["ng-option-tmp",""],[3,"title"]],template:function(t,o){1&t&&e.YNc(0,N,9,25,"ng-container",0),2&t&&e.Q6J("ngIf",o.form)},dependencies:[R.O5,d.JJ,d.JL,d.sg,d.u,h.w9,h.ir],styles:[".form-control[_ngcontent-%COMP%]{height:auto!important}"]}),c})()}}]);