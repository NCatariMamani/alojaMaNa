"use strict";(self.webpackChunkalojamiento_frontend=self.webpackChunkalojamiento_frontend||[]).push([[158],{7158:(Z,u,s)=>{s.r(u),s.d(u,{InChargeModule:()=>F});var p=s(6895),h=s(6646),c=s(4385),f=s(1135),m=s(2722),o=s(168),C=s(8268);const v={id:{title:"ID",sort:!1,width:"7%"},nombre:{title:"Nombre",sort:!1},paterno:{title:"Paterno",sort:!1},materno:{title:"Materno",sort:!1},ci:{title:"CI",sort:!1},ext:{title:"Extenci\xf3n",sort:!1},celular:{title:"Celular",sort:!1},alojamiento:{title:"Alojamiento",sort:!1,valuePrepareFunction:t=>t?.nombre,filterFunction:(t,i)=>"string"!=typeof i||t.nombre?.toUpperCase()>=i.toUpperCase()||""===i},user:{title:"Usuario",sort:!1,valuePrepareFunction:t=>t?.email,filterFunction:(t,i)=>"string"!=typeof i||t.email?.toUpperCase()>=i.toUpperCase()||""===i}};var I=s(4534),e=s(1571),g=s(388),b=s(7795),A=s(9219),y=s(2243),L=s(4554);const S=[{path:"",component:(()=>{class t extends C.nh{constructor(n,a){super(),this.modalService=n,this.inChargeService=a,this.data=new c.nC,this.params=new f.X(new o.NV),this.data1=[],this.columnFilters=[],this.totalItems=0,this.settings={...this.settings,hideSubHeader:!1,actions:{columnTitle:"Acciones",edit:!0,delete:!0,add:!1,position:"right"},columns:{...v}}}ngOnInit(){this.data.onChanged().pipe((0,m.R)(this.$unSubscribe)).subscribe(n=>{"filter"===n.action&&(n.filter.filters.map(r=>{let l="",d=o.ay.ILIKE;switch(l=`filter.${r.field}`,r.field){case"id":case"celular":d=o.ay.EQ;break;case"alojamiento":d=o.ay.ILIKE,l=`filter.${r.field}.nombre`;break;case"user":d=o.ay.ILIKE,l=`filter.${r.field}.email`;break;default:d=o.ay.ILIKE}""!==r.search?this.columnFilters[l]=`${d}:${r.search}`:delete this.columnFilters[l]}),this.params=this.pageFilter(this.params),this.getAllInCharge())}),this.params.pipe((0,m.R)(this.$unSubscribe)).subscribe(()=>this.getAllInCharge())}getAllInCharge(){this.loading=!0;let n={...this.params.getValue(),...this.columnFilters};this.inChargeService.getAll(n).subscribe({next:a=>{console.log(a),this.data.load(a.data),this.data.refresh(),this.totalItems=a.count,this.loading=!1},error:a=>{this.loading=!1,this.data.load([])}})}edit(n){this.openModal(n)}openModal(n){this.modalService.show(I.v,{initialState:{inCharges:n,callback:r=>{r&&this.getAllInCharge()}},class:"modal-lg modal-dialog-centered",ignoreBackdropClick:!0})}showDeleteAlert(n){this.alertQuestion("warning","Eliminar","\xbfDesea eliminar este registro?").then(a=>{a.isConfirmed&&this.delete(n.id)})}delete(n){this.inChargeService.remove(n).subscribe({next:()=>{this.alert("success","ENCARGADO","Borrado Correctamente"),this.params.pipe((0,m.R)(this.$unSubscribe)).subscribe(()=>this.getAllInCharge())},error:a=>{this.alert("error","No se logro Eliminar","Existe una relacion")}})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g.tT),e.Y36(b.t))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-inCharge-list"]],features:[e.qOj],decls:19,vars:9,consts:[[3,"header"],["header","",1,"ch-content"],[1,"title"],["body",""],[1,"row"],[1,"col-md-8","mb-3"],[1,"col-md-4","text-end","d-flex","flex-row-reverse","mb-3"],[1,"mr-3"],["type","button","tooltip","Nuevo","containerclass","tooltip-style",1,"btn","btn-info","btn-sm","active","d-flex","justify-content-center","align-items-center","ml-3",3,"click"],[1,"bx","bx-plus","bx-sm","ml-2"],[3,"settings","leftList","settingsChange"],[1,"col-md-12"],[1,"table-responsive"],[3,"settings","source","edit","delete"],[3,"params","totalItems"]],template:function(n,a){1&n&&(e.TgZ(0,"app-card",0)(1,"div",1)(2,"h5",2),e._uU(3,"ENCARGADOS"),e.qZA()(),e.TgZ(4,"div",3)(5,"div",4),e._UZ(6,"div",5),e.TgZ(7,"div",6)(8,"div",7)(9,"button",8),e.NdJ("click",function(){return a.openModal()}),e._uU(10," Nuevo "),e._UZ(11,"i",9),e.qZA()(),e.TgZ(12,"app-columns-select",10),e.NdJ("settingsChange",function(l){return a.settings=l}),e.qZA()()(),e.TgZ(13,"div",4)(14,"div",11)(15,"div")(16,"div",12)(17,"ng2-smart-table",13),e.NdJ("edit",function(l){return a.edit(l.data)})("delete",function(l){return a.showDeleteAlert(l.data)}),e.qZA()(),e._UZ(18,"app-pagination",14),e.qZA()()()()()),2&n&&(e.Q6J("header",!0),e.xp6(12),e.Q6J("settings",a.settings)("leftList",!0),e.xp6(3),e.Tol(a.loading?"table-loading":""),e.xp6(2),e.Q6J("settings",a.settings)("source",a.data),e.xp6(1),e.Q6J("params",a.params)("totalItems",a.totalItems))},dependencies:[A.A,y.L,c.T5,L.Q]}),t})()}];let T=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[h.Bz.forChild(S),h.Bz]}),t})();var E=s(8909);let F=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[p.ez,T,E.m8,g.zk.forChild()]}),t})()}}]);